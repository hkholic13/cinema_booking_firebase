<!DOCTYPE html>
<html lang="en">

<head>
	<title>Date&Time </title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Colo Shop Template">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="styles/bootstrap4/bootstrap.min.css">
	<link href="plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.carousel.css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/owl.theme.default.css">
	<link rel="stylesheet" type="text/css" href="plugins/OwlCarousel2-2.2.1/animate.css">
	<link rel="stylesheet" href="plugins/themify-icons/themify-icons.css">
	<link rel="stylesheet" type="text/css" href="plugins/jquery-ui-1.12.1.custom/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="styles/single_styles.css">
	<link rel="stylesheet" type="text/css" href="styles/single_responsive.css">
</head>

<body>

	<div class="super_container">
<nav></nav>
		<!-- Header -->

		<header class="header trans_300">

			<!-- Top Navigation -->

			<div class="top_nav">
				<div class="container">
					<div class="row">
						<div class="col-md-6">
						
						</div>
						<div class="col-md-6 text-right">
							<div class="top_nav_right">
								<ul class="top_nav_menu">

									<!-- Currency / Language / My Account -->


									
									<li class="account">
										<a href="#">
											My Account
											<i class="fa fa-angle-down"></i>
										</a>
										<ul class="account_selection">
											<button type="submit" id="logout" class="login100-form-btn">
												logout
											</button>

										</ul>
									</li>
								</ul>
							</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Main Navigation -->

			<div class="main_nav_container">
				<div class="container">
					<div class="row">
						<div class="col-lg-12 text-right">
							<div class="logo_container">
								<a href="#">Watch<span>It</span></a>
							</div>
							<nav class="navbar">
								<ul class="navbar_menu">
									<li><a href="homepage.html">home</a></li>
									 <li><a href="contact.html">contact</a></li>
								</ul>
								<ul class="navbar_user">


								</ul>
								<div class="hamburger_container">
									<i class="fa fa-bars" aria-hidden="true"></i>
								</div>
							</nav>
						</div>
					</div>
				</div>
			</div>

		</header>

		<div class="fs_menu_overlay"></div>

		<!-- Hamburger Menu -->

		<div class="container single_product_container">
			<div class="row">
				<div class="col">
					<div class="breadcrumbs d-flex flex-row align-items-center">
						
					</div>

					<!-- Breadcrumbs -->
                    <div class="container" style="color:beige">
                        <!--selection of dates and movies and theatres and print show time-->
                        <form >
                            
                            <label for="movies">Select movie:</label>
                            <select id="movies" name="movies" placeholder="select movie">
                                <option disabled selected value> -- select an option -- </option>
                              <option value="tanhaji">tanhaji</option>
                              <option value="bheeshma">bheeshma</option>
                              
                            </select>
                            <label for="date">Select date:</label>
                            <select id="date" name="date">
                                <option disabled selected value> -- select an option -- </option>
                              <option value="20/03/2020">20/03/2020</option>
                              <option value="21/03/2020">21/03/2020</option>
                              <option value="22/03/2020">22/03/2020</option>
                            </select>
                            <label for="theatre">Select theatre:</label>
                            <select id="theatre" name="theatre">
                                <option disabled selected value> -- select an option -- </option>
                              <option value="sandhya">sandhya</option>
                              <option value="tulsi">tulsi</option>
                              
                            </select>&nbsp;&nbsp;&nbsp;
                            <input type="button" value="Get Selected Text Value" onclick="GetSelectedTextValue()" style="color:crimson" />
                          </form></div>
                          <div class="container" style="color:beige"></div>
                         
                        <table class="table table-striped" style="color:beige">
                            <thead>
                                <tr>
    
                                    <td>
                                        <h5 id="moviename">Show-Time</h5>
                                    </td>
                                    
                                    
    
                                </tr>
                            </thead>
                            <tbody id="date1">
    
                            </tbody>
                        </table></div>

                        




				



					<!-- Newsletter -->



					<!-- Footer -->



				</div>
				<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-app.js"></script>
				<script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-auth.js"></script>
                <script src="https://www.gstatic.com/firebasejs/7.9.1/firebase-firestore.js"></script>
                
				
                <script type="text/javascript">
                    var firebaseConfig = {
  					apiKey: "AIzaSyCUgHpoxuksst6-ir4drkljGXQBfUyEy80",
					authDomain: "myfirst2468.firebaseapp.com",
					databaseURL: "https://myfirst2468.firebaseio.com",
					projectId: "myfirst2468",
					storageBucket: "myfirst2468.appspot.com",
					messagingSenderId: "1010919552988",
					appId: "1:1010919552988:web:14c4a5fb687cb71829c119",
					measurementId: "G-M7L487C9YL"
};
// Initialize Firebase
					firebase.initializeApp(firebaseConfig);
					const auth = firebase.auth();
					const db = firebase.firestore();
					var user = auth.currentUser;
                    
                    
                    
                            
                    
                        
                        
                        
                        
                        function GetSelectedTextValue() {
                            
                            

                         // This will output the value selected

                         var ddlFruits = document.getElementById("movies");
                        var selectedText = ddlFruits.options[ddlFruits.selectedIndex].innerHTML;
                        var selectedValue = ddlFruits.value;
                        alert("Selected Text: " + selectedText + " Value: " + selectedValue);
                        var ddlFruits1 = document.getElementById("date");
                        var selectedText = ddlFruits1.options[ddlFruits1.selectedIndex].innerHTML;
                        var selectedValueDate = ddlFruits1.value;
                        var ddlFruits2 = document.getElementById("theatre");
                        var selectedText = ddlFruits2.options[ddlFruits2.selectedIndex].innerHTML;
                        var selectedValueTheatre = ddlFruits2.value;
                            db.collection("movies").where("movie_name", "==",selectedValue).where("date", "==",selectedValueDate).where("theatre","==",selectedValueTheatre)
                            .get()
                            .then(function(querySnapshot) {
                            querySnapshot.forEach(function(doc) {
            // doc.data() is never undefined for query doc snapshots
                        console.log(doc.data().movie_name,doc.data().date)
					    let newRow = date1.insertRow()
                        let movieNameCell = newRow.insertCell(0)
                        let movieDateCell=newRow.insertCell(1)
                        let moviemovieCell=newRow.insertCell(2)
                        let movieTimeCell=newRow.insertCell(3)
                        let movieBookCell=newRow.insertCell(4)
                       
                        
                        let movieNameData=document.createTextNode(doc.data().time);
                        let movieDateData=document.createTextNode(doc.data().theatre);
                        let movieTimeData=document.createTextNode(doc.data().date)
                        let moviemovieData=document.createTextNode(doc.data().movie_name);
                        //let movieBookData=document.createTextNode("Book Now");
                        movieNameCell.appendChild(movieNameData)
                        movieDateCell.appendChild(movieDateData)
                        //movieBookCell.appendChild(movieBookData)
                        movieTimeCell.appendChild(movieTimeData)
                        moviemovieCell.appendChild(moviemovieData)
                        
                        

                        var button = document.createElement('button');  
                  
                // Create the text node for anchor element. 
                var link = document.createTextNode("Book Now"); 
                
                // Append the text node to anchor element. 
               button.appendChild(link);  
                  
                // Set the title. 
                button.title = "Seat Booking";  
                
                // Set the href property.
                button.id="you";
                
                // Append the anchor element to the body. 
                movieBookCell.appendChild(button);
                document.getElementById("you").onclick =function f() {
                    
                    var user=auth.currentUser;
                   if(user){
                    db.collection('users').doc(user.uid).get().then(doc2 => {
                    
                    db.collection('seats').add({
                            
                            movie_name:moviemovieData.nodeValue,
                            theatre:movieDateData.nodeValue,
                            date:movieTimeData.nodeValue,
                            time:movieNameData.nodeValue,
                            email:doc2.data().email,
                            timestamp:firebase.firestore.FieldValue.serverTimestamp(),
                        
                        
                        })})
                        
                        
  }
  
  button.id="you"
		document.getElementById('you').style.display = 'block'; 
        this.style.display = 'none';
        var but=document.createElement("button");
        but.innerHTML="Seats";
        movieBookCell.appendChild(but);
        but.addEventListener('click',function(){window.location="theatre.html"});
        
};



                   


            



                            })} )};  
	
</script>


               

				<script src="js/jquery-3.2.1.min.js"></script>
				<script src="styles/bootstrap4/popper.js"></script>
				<script src="styles/bootstrap4/bootstrap.min.js"></script>
				<script src="plugins/Isotope/isotope.pkgd.min.js"></script>
				<script src="plugins/OwlCarousel2-2.2.1/owl.carousel.js"></script>
				<script src="plugins/easing/easing.js"></script>
				<script src="plugins/jquery-ui-1.12.1.custom/jquery-ui.js"></script>
                <script src="js/single_custom.js"></script><script>
                const logout=document.querySelector('#logout');
  logout.addEventListener('click',(e)=>{
    e.preventDefault();
    auth.signOut().then(()=>{
    });
    auth.onAuthStateChanged(user=>{
    if(user){
      console.log('user logged in:',user)
    }
    else{
      alert('user logged out');
      window.location="home.html"
    }
  })
  })
</script>
				
</body>

</html>